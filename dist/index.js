!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("react")):"function"==typeof define&&define.amd?define("react-json-editor-ajrm",["React"],n):"object"==typeof exports?exports["react-json-editor-ajrm"]=n(require("react")):e["react-json-editor-ajrm"]=n(e.React)}("undefined"!=typeof self?self:this,function(e){return function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/dist/",t(t.s=0)}([function(e,n,t){e.exports=t(1)},function(e,n,t){var r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},s=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),a=t(2),l=(r=a)&&r.__esModule?r:{default:r};var c=function(e){function n(e){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));if(!("id"in t.props))throw"An 'id' property must be specified. Must be unique";t.createMarkup=t.createMarkup.bind(t),t.onClick=t.onClick.bind(t),t.onBlur=t.onBlur.bind(t),t.update=t.update.bind(t),t.renderLabels=t.renderLabels.bind(t),t.newSpan=t.newSpan.bind(t),t.renderErrorMessage=t.renderErrorMessage.bind(t),t.onScroll=t.onScroll.bind(t),t.showPlaceholder=t.showPlaceholder.bind(t),t.tokenize=t.tokenize.bind(t),t.onKeyPress=t.onKeyPress.bind(t),t.onKeyDown=t.onKeyDown.bind(t),t.onPaste=t.onPaste.bind(t),t.stopEvent=t.stopEvent.bind(t),t.uniqueID="AJRM-JSON-EDITOR-"+t.props.id;var r={},o={};r="colors"in t.props?{default:"default"in t.props.colors?t.props.colors.default:"#D4D4D4",string:"string"in t.props.colors?t.props.colors.string:"#CE8453",number:"number"in t.props.colors?t.props.colors.number:"#B5CE9F",colon:"colon"in t.props.colors?t.props.colors.colon:"#49B8F7",keys:"keys"in t.props.colors?t.props.colors.keys:"#9CDCFE",keys_whiteSpace:"keys_whiteSpace"in t.props.colors?t.props.colors.keys_whiteSpace:"#AF74A5",primitive:"primitive"in t.props.colors?t.props.colors.primitive:"#6392C6",error:"error"in t.props.colors?t.props.colors.error:"#ED0000",background:"background"in t.props.colors?t.props.colors.background:"#1E1E1E",background_warning:"background_warning"in t.props.colors?t.props.colors.background_warning:"#1E1E1E"}:{default:"#D4D4D4",string:"#CE8453",number:"#B5CE9F",colon:"#49B8F7",keys:"#9CDCFE",keys_whiteSpace:"#AF74A5",primitive:"#6392C6",error:"#ED0000",background:"#1E1E1E",background_warning:"#1E1E1E"},t.colors=r,o="style"in t.props?{outerBox:"outerBox"in t.props.style?t.props.style.outerBox:{},container:"container"in t.props.style?t.props.style.container:{},warningBox:"warningBox"in t.props.style?t.props.style.warningBox:{},errorMessage:"errorMessage"in t.props.style?t.props.style.errorMessage:{},body:"body"in t.props.style?t.props.style.body:{},labelColumn:"labelColumn"in t.props.style?t.props.style.labelColumn:{},labels:"labels"in t.props.style?t.props.style.labels:{},contentBox:"contentBox"in t.props.style?t.props.style.contentBox:{}}:{outerBox:{},container:{},warningBox:{},errorMessage:{},body:{},labelColumn:{},labels:{},contentBox:{}},t.style=o,t.confirmGood=!("confirmGood"in t.props)||t.props.confirmGood;var i="height"in t.props?parseInt(t.props.height.replace(/px/,""))+60+"px":"610px",s="width"in t.props?parseInt(t.props.width.replace(/px/,""))+"px":"479px",a=parseInt(i.replace(/px/,""))-60+"px",l=parseInt(s.replace(/px/,""))-44+"px",c=parseInt(s.replace(/px/,""))-60+"px";return t.totalHeight=i,t.totalWidth=s,t.bodyHeight=a,t.bodyWidth=l,t.messageWidth=c,t.renderCount=1,t.state={preText:"",markupText:"",plainText:"",json:"",jsObject:void 0,lines:!1,error:!1},t}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,a.Component),s(n,[{key:"render",value:function(){var e=this.state.markupText,n=this.state.error,t=this.uniqueID,r=this.colors,o=this.style,s=this.confirmGood,a=this.totalHeight,c=this.totalWidth,p=this.bodyHeight,u=this.bodyWidth,k=this.messageWidth,f=!!n&&"token"in n;return this.renderCount++,l.default.createElement("div",{name:"outer-box",id:t+"-outer-box",style:i({display:"block",overflow:"none",height:a,width:c,margin:0,boxSizing:"border-box",position:"relative"},o.outerBox)},s?l.default.createElement("div",{style:{opacity:f?0:1,height:"30px",width:"30px",position:"absolute",top:0,right:0,transform:"translate(-25%,25%)",pointerEvents:"none",transitionDuration:"0.2s",transitionTimingFunction:"cubic-bezier(0, 1, 0.5, 1)"}},l.default.createElement("svg",{height:"30px",width:"30px",viewBox:"0 0 100 100"},l.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"green",opacity:"0.85",d:"M39.363,79L16,55.49l11.347-11.419L39.694,56.49L72.983,23L84,34.085L39.363,79z"}))):void 0,l.default.createElement("div",{name:"container",id:t+"-container",style:i({display:"block",height:a,width:c,margin:0,boxSizing:"border-box",overflow:"hidden",fontFamily:"Roboto, sans-serif"},o.container),onClick:this.onClick},l.default.createElement("div",{name:"warning-box",id:t+"-warning-box",style:i({display:"block",overflow:"hidden",height:f?"60px":"0px",width:c,margin:0,backgroundColor:r.background_warning,transitionDuration:"0.2s",transitionTimingFunction:"cubic-bezier(0, 1, 0.5, 1)"},o.warningBox),onClick:this.onClick},l.default.createElement("span",{style:{display:"inline-block",height:"60px",width:"60px",margin:0,boxSizing:"border-box",overflow:"hidden",verticalAlign:"top",pointerEvents:"none"},onClick:this.onClick},l.default.createElement("div",{style:{position:"relative",top:0,left:0,height:"60px",width:"60px",margin:0,pointerEvents:"none"},onClick:this.onClick},l.default.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",pointerEvents:"none"},onClick:this.onClick},l.default.createElement("svg",{height:"25px",width:"25px",viewBox:"0 0 100 100"},l.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"red",d:"M73.9,5.75c0.467-0.467,1.067-0.7,1.8-0.7c0.7,0,1.283,0.233,1.75,0.7l16.8,16.8  c0.467,0.5,0.7,1.084,0.7,1.75c0,0.733-0.233,1.334-0.7,1.801L70.35,50l23.9,23.95c0.5,0.467,0.75,1.066,0.75,1.8  c0,0.667-0.25,1.25-0.75,1.75l-16.8,16.75c-0.534,0.467-1.117,0.7-1.75,0.7s-1.233-0.233-1.8-0.7L50,70.351L26.1,94.25  c-0.567,0.467-1.167,0.7-1.8,0.7c-0.667,0-1.283-0.233-1.85-0.7L5.75,77.5C5.25,77,5,76.417,5,75.75c0-0.733,0.25-1.333,0.75-1.8  L29.65,50L5.75,26.101C5.25,25.667,5,25.066,5,24.3c0-0.666,0.25-1.25,0.75-1.75l16.8-16.8c0.467-0.467,1.05-0.7,1.75-0.7  c0.733,0,1.333,0.233,1.8,0.7L50,29.65L73.9,5.75z"}))))),l.default.createElement("span",{style:{display:"inline-block",height:"60px",width:k,margin:0,overflow:"hidden",verticalAlign:"top",position:"absolute",pointerEvents:"none"},onClick:this.onClick},this.renderErrorMessage())),l.default.createElement("div",{name:"body",id:t+"-body",style:i({display:"block",overflow:"none",height:f?p:a,width:c,margin:0,resize:"none",fontFamily:"Roboto Mono, Monaco, monospace",fontSize:"11px",backgroundColor:r.background,transitionDuration:"0.2s",transitionTimingFunction:"cubic-bezier(0, 1, 0.5, 1)"},o.body),onClick:this.onClick},l.default.createElement("div",{name:"labels",id:t+"-labels",style:i({display:"inline-block",boxSizing:"border-box",height:"100%",width:"44px",margin:0,padding:"5px 0px 5px 10px",overflow:"hidden",color:"#D4D4D4"},o.labelColumn),onClick:this.onClick},this.renderLabels()),l.default.createElement("div",{id:t+"-content-box",contentEditable:!0,style:i({display:"inline-block",boxSizing:"border-box",height:"100%",width:u,margin:0,padding:"5px",overflowX:"hidden",overflowY:"auto",wordWrap:"break-word",whiteSpace:"pre-line",color:"#D4D4D4",outline:"none"},o.contentBox),dangerouslySetInnerHTML:this.createMarkup(e),onKeyPress:this.onKeyPress,onKeyDown:this.onKeyDown,onClick:this.onClick,onBlur:this.onBlur,onScroll:this.onScroll,onPaste:this.onPaste,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1}))))}},{key:"renderErrorMessage",value:function(){var e=this.messageWidth,n=this.state.error,t=this.style;if(n)return l.default.createElement("p",{style:i({color:"red",fontSize:"12px",position:"absolute",width:e,height:"60px",boxSizing:"border-box",margin:0,padding:0,paddingRight:"10px",overflowWrap:"break-word",display:"flex",flexDirection:"column",justifyContent:"center"},t.errorMessage)},n.reason+" at line "+n.line)}},{key:"renderLabels",value:function(){for(var e=this.uniqueID+"-line-",n=this.colors,t=this.style,r=this.state.error?this.state.error.line:-1,o=this.state.lines?this.state.lines:1,s=new Array(o),a=0;a<o-1;a++)s[a]=a+1;return s.map(function(o){var s=o!==r?n.default:"red";return l.default.createElement("div",{key:e+o,id:e+o,style:i({},t.labels,{color:s})},o)})}},{key:"createMarkup",value:function(e){return void 0===e?{__html:""}:{__html:""+e}}},{key:"newSpan",value:function(e,n,t){var r=this.uniqueID+"-token-"+e+"-rc-"+this.renderCount,o=this.colors,i=n.type,s=n.string,a="";switch(i){case"string":case"number":case"primitive":case"error":a=o[n.type];break;case"key":a=" "===s?o.keys_whiteSpace:o.keys;break;case"symbol":a=":"===s?o.colon:o.default;break;default:a=o.default}return'<span id="'+r+'" key="'+r+'" type="'+i+'" value="'+s+'" depth="'+t+'" style="color:'+a+'">'+s+"</span>"}},{key:"update",value:function(){var e=this.uniqueID,n=document.getElementById(e+"-content-box"),t=this.tokenize(n);"onChange"in this.props&&this.props.onChange({plainText:t.indentation,markupText:t.markup,json:t.json,jsObject:t.jsObject,lines:t.lines,error:t.error}),this.setState({plainText:t.indentation,markupText:t.markup,json:t.json,jsObject:t.jsObject,lines:t.lines,error:t.error})}},{key:"stopEvent",value:function(e){e&&(e.preventDefault(),e.stopPropagation())}},{key:"onKeyPress",value:function(e){"viewOnly"in this.props&&this.props.viewOnly&&this.stopEvent(e)}},{key:"onKeyDown",value:function(e){"viewOnly"in this.props&&this.props.viewOnly&&this.stopEvent(e)}},{key:"onPaste",value:function(e){"viewOnly"in this.props&&this.props.viewOnly&&this.stopEvent(e),this.update()}},{key:"onClick",value:function(){"viewOnly"in this.props&&this.props.viewOnly}},{key:"onBlur",value:function(){"viewOnly"in this.props&&this.props.viewOnly||this.update()}},{key:"onScroll",value:function(e){var n=this.uniqueID;document.getElementById(n+"-labels").scrollTop=e.target.scrollTop}},{key:"componentDidUpdate",value:function(){this.showPlaceholder()}},{key:"componentDidMount",value:function(){var e=this.uniqueID;document.getElementById(e+"-content-box").addEventListener("paste",function(e){e.preventDefault();var n=e.clipboardData.getData("text/plain");document.execCommand("insertHTML",!1,n)}),this.showPlaceholder()}},{key:"showPlaceholder",value:function(){var e=this.state.preText;if("placeholder"in this.props){var n=this.props.placeholder;if(!([e,void 0,null].indexOf(n)>-1)&&"object"===(void 0===n?"undefined":o(n))){var t=this.tokenize(n);this.setState({preText:n,plainText:t.indentation,markupText:t.markup,lines:t.lines,error:t.error})}}}},{key:"tokenize",value:function(e){if("object"!==(void 0===e?"undefined":o(e)))return console.error("tokenize() expects object type properties only. Got '"+(void 0===e?"undefined":o(e))+"' type instead.");var n,t=this.newSpan;if("nodeType"in e){var r=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t={active:!1,string:"",number:"",symbol:"",space:"",delimiter:"",quarks:[]};function r(e,r){switch(r){case"symbol":case"delimiter":t.active&&t.quarks.push({string:t[t.active],type:n+"-"+t.active}),t[t.active]="",t.active=r,t[t.active]=e;break;default:var o="\n"===e&&"string"===t.active&&t.string.length>0;r!==t.active||o?(t.active&&t.quarks.push({string:t[t.active],type:n+"-"+t.active}),t[t.active]="",t.active=r,t[t.active]=e):t[r]+=e}}for(var o=0;o<e.length;o++){var i=e.charAt(o);switch(i){case'"':case"'":r(i,"delimiter");break;case" ":case" ":r(i,"space");break;case"{":case"}":case"[":case"]":case":":case",":r(i,"symbol");break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":"string"===t.active?r(i,"string"):r(i,"number");break;case"-":if(o<e.length-1&&"0123456789".indexOf(e.charAt(o+1))>-1){r(i,"number");break}case".":if(o<e.length-1&&o>0&&"0123456789".indexOf(e.charAt(o+1))>-1&&"0123456789".indexOf(e.charAt(o-1))>-1){r(i,"number");break}default:r(i,"string")}}return t.active&&(t.quarks.push({string:t[t.active],type:n+"-"+t.active}),t[t.active]="",t.active=!1),t.quarks},i=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;m={token:e,line:x,reason:n},u.tokens_merge[e+t].type="error"},s=function(e,n){if(void 0===e&&console.error("tokenID argument must be an integer."),void 0===n&&console.error("options argument must be an array."),e===u.tokens_merge.length-1)return!1;for(var t=e+1;t<u.tokens_merge.length;t++){var r=u.tokens_merge[t];switch(r.type){case"space":case"linebreak":break;case"symbol":case"colon":return n.indexOf(r.string)>-1&&t;default:return!1}}return!1},a=function(e,n){if(void 0===e&&console.error("tokenID argument must be an integer."),void 0===n&&console.error("options argument must be an array."),0===e)return!1;for(var t=e-1;t>=0;t--){var r=u.tokens_merge[t];switch(r.type){case"space":case"linebreak":break;case"symbol":case"colon":return n.indexOf(r.string)>-1;default:return!1}}return!1},l=function(e){if(void 0===e&&console.error("tokenID argument must be an integer."),0===e)return!1;for(var n=e-1;n>=0;n--){var t=u.tokens_merge[n];switch(t.type){case"space":case"linebreak":break;default:return t.type}}return!1},c=function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return J++,X>0||e?"<br>":""}(arguments.length>0&&void 0!==arguments[0]&&arguments[0])+function(){for(var e=[],n=0;n<2*X;n++)e.push("&nbsp;");return e.join("")}()},p=e.cloneNode(!0);if(!p.hasChildNodes())return"";var u={tokens_unknown:[],tokens_proto:[],tokens_split:[],tokens_fallback:[],tokens_normalize:[],tokens_merge:[],tokens_plainText:"",indented:"",json:"",jsObject:void 0,markup:""};p.childNodes.forEach(function(e,n){var t={};switch(e.nodeName){case"SPAN":t={string:e.textContent,type:e.attributes.type.textContent},u.tokens_unknown.push(t);case"BR":""===e.textContent&&u.tokens_unknown.push({string:"\n",type:"unknown"});break;case"#text":u.tokens_unknown.push({string:e.wholeText,type:"unknown"});break;case"FONT":u.tokens_unknown.push({string:e.textContent,type:"unknown"})}}),u.tokens_unknown.forEach(function(e,n){u.tokens_proto=u.tokens_proto.concat(r(e.string,"proto"))}),u.tokens_proto.forEach(function(e,n){-1===e.type.indexOf("proto")&&!function(e,n){var t="",r="",o=!1;switch(n){case"primitive":if(-1===["true","false","null","undefined"].indexOf(e))return!1;break;case"string":if(e.length<2)return!1;if(t=e.charAt(0),r=e.charAt(e.length-1),-1===(o="'\"".indexOf(t)))return!1;if(t!==r)return!1;for(var i=0;i<e.length;i++)if(i>0&&i<e.length-1&&e.charAt(i)==="'\""[o]&&"\\"!==e.charAt(i-1))return!1;break;case"key":if(0===e.length)return!1;if(t=e.charAt(0),r=e.charAt(e.length-1),(o="'\"".indexOf(t))>-1){if(1===e.length)return!1;if(t!==r)return!1;for(i=0;i<e.length;i++)if(i>0&&i<e.length-1&&e.charAt(i)==="'\""[o]&&"\\"!==e.charAt(i-1))return!1}else for(i=0;i<"'\"`.,:;{}[]&<>=~*%<>\\|/-+!?@^  ".length;i++){var s="'\"`.,:;{}[]&<>=~*%<>\\|/-+!?@^  ".charAt(i);if(e.indexOf(s)>-1)return!1}break;case"number":for(i=0;i<e.length;i++)if(-1==="0123456789".indexOf(e.charAt(i)))if(0===i){if("-"!==e.charAt(0))return!1}else if("."!==e.charAt(i))return!1;break;case"symbol":if(e.length>1)return!1;if(-1==="{[:]},".indexOf(e))return!1;break;case"colon":if(e.length>1)return!1;if(":"!==e)return!1;break;default:return!0}return!0}(e.string,e.type)?u.tokens_split=u.tokens_split.concat(r(e.string,"split")):u.tokens_split.push(e)}),u.tokens_split.forEach(function(e){var n=e.type,t=e.string,r=t.length,o=[];n.indexOf("-")>-1&&("string"!==(n=n.slice(n.indexOf("-")+1))&&o.push("string"),o.push("key"),o.push("error"));var i={string:t,length:r,type:n,fallback:o};u.tokens_fallback.push(i)});var k={brackets:[],stringOpen:!1,isValue:!1};u.tokens_fallback.forEach(function(e,n){var t=e.type,r=e.string,o={type:t,string:r};switch(t){case"symbol":case"colon":if(k.stringOpen){k.isValue?o.type="string":o.type="key";break}switch(r){case"[":case"{":k.brackets.push(r),k.isValue="["===k.brackets[k.brackets.length-1];break;case"]":case"}":k.brackets.pop(),k.isValue="["===k.brackets[k.brackets.length-1];break;case",":if("colon"===function(){var e=u.tokens_normalize.length-1;if(e<1)return!1;for(var n=e;n>=0;n--){var t=u.tokens_normalize[n];switch(t.type){case"space":case"linebreak":break;default:return t}}return!1}().type)break;k.isValue="["===k.brackets[k.brackets.length-1];break;case":":o.type="colon",k.isValue=!0}break;case"delimiter":if(k.isValue?o.type="string":o.type="key",!k.stringOpen){k.stringOpen=r;break}if(n>0){var i=u.tokens_fallback[n-1],s=i.string,a=i.type,l=s.charAt(s.length-1);if("string"===a&&"\\"===l)break}if(k.stringOpen===r){k.stringOpen=!1;break}break;case"primitive":case"string":if(["false","true","null","undefined"].indexOf(r)>-1){o.type="primitive";break}if("\n"===r&&!k.stringOpen){o.type="linebreak";break}k.isValue?o.type="string":o.type="key";break;case"space":case"number":k.stringOpen&&(k.isValue?o.type="string":o.type="key")}u.tokens_normalize.push(o)});for(var f=0;f<u.tokens_normalize.length;f++){var d=u.tokens_normalize[f],b={string:d.string,type:d.type,tokens:[f]};if(-1===["symbol","colon"].indexOf(d.type)&&f+1<u.tokens_normalize.length){for(var h=0,g=f+1;g<u.tokens_normalize.length;g++){var y=u.tokens_normalize[g];if(d.type!==y.type)break;b.string+=y.string,b.tokens.push(g),h++}f+=h}u.tokens_merge.push(b)}var v="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_$",m=!1,x=u.tokens_merge.length>0?1:0;k={brackets:[],stringOpen:!1,isValue:!1};var w=[];for(f=0;f<u.tokens_merge.length&&!m;f++){var O=u.tokens_merge[f],C=O.string,_=O.type,E=!1;switch(_){case"space":break;case"linebreak":x++;break;case"symbol":switch(C){case"{":case"[":if(E=a(f,["}","]"])){i(f,"'"+u.tokens_merge[E].string+"' token cannot be followed by '"+C+"' token");break}if("["===C&&f>0&&!a(f,[":","[",","])){i(f,"'[' token can only follow ':', '[', and ',' tokens");break}if("{"===C&&a(f,["{"])){i(f,"'{' token cannot follow another '{' token");break}k.brackets.push(C),k.isValue="["===k.brackets[k.brackets.length-1],w.push({i:f,line:x,string:C});break;case"}":case"]":if("}"===C&&"{"!==k.brackets[k.brackets.length-1]){i(f,"Missing '{' open curly brace");break}if("}"===C&&a(f,[","])){i(f,"'}' token cannot follow a comma");break}if("]"===C&&"["!==k.brackets[k.brackets.length-1]){i(f,"Missing '[' open brace");break}if("]"===C&&a(f,[":"])){i(f,"']' token cannot follow a colon");break}k.brackets.pop(),k.isValue="["===k.brackets[k.brackets.length-1],w.push({i:f,line:x,string:C});break;case",":if(E=a(f,["{"])){if(s(f,["}"])){i(f,"Comma can only be wrapped by brackets");break}i(f,"Comma cannot follow '{' token");break}if(s(f,["}",",","]"])){i(f,"Values are always specified. Comma cannot be followed by '}', ']' tokens or another comma");break}switch(E=l(f)){case"key":case"colon":i(f,"Comma cannot follow "+E);break;case"symbol":if(a(f,["{"])){i(f,"Comma cannot follow '{' token");break}}k.isValue="["===k.brackets[k.brackets.length-1]}u.json+=C;break;case"colon":if((E=a(f,["["]))&&s(f,["]"])){i(f,"Colon can only be wrapped by curly brackets");break}if(E){i(f,"Colon cannot follow '[' token");break}if("key"!==l(f)){i(f,"Colon can only follow key");break}k.isValue=!0,u.json+=C;break;case"key":case"string":var j=C.charAt(0),S=C.charAt(C.length-1);"'\"".indexOf(j);if(-1==="'\"".indexOf(j)&&-1!=="'\"".indexOf(S)){i(f,"Missing opening "+S+" quote on "+_);break}if(-1==="'\"".indexOf(S)&&-1!=="'\"".indexOf(j)){i(f,"Missing closing "+j+" quote on "+_);break}if("'\"".indexOf(j)>-1&&j!==S){i(f,"Missing closing "+j+" quote on "+_);break}if("string"===_&&-1==="'\"".indexOf(j)&&-1==="'\"".indexOf(S)){i(f,"String must be wrapped by quotes");break}if("key"===_&&"'\"".indexOf(j)>-1&&C.length<=2){i(f,"Key cannot be an empty string");break}if("key"===_&&-1==="'\"".indexOf(j)&&-1==="'\"".indexOf(S))for(var D=0;D<C.length&&!m;D++){var T=C.charAt(D);if(-1===v.indexOf(T)){i(f,"Non-alphanemeric token '"+T+"' is not allowed outside string notation");break}}if("'"===j?C='"'+C.slice(1,-1)+'"':'"'!==j&&(C='"'+C+'"'),"key"===_&&"key"===l(f)){i(f,"Key containing space must be wrapped by quotes");break}if("key"===_&&!a(f,["{",","])){i(f,"Key can only follow '{' or ',' tokens");break}if("string"===_&&!a(f,["[",":",","])){i(f,_+" can only follow '[' ':' ',' tokens");break}if("key"===_&&k.isValue){i(f,"Unexpected key found at value position");break}if("string"===_&&!k.isValue){i(f,"Unexpected string found at key position");break}u.json+=C;break;case"number":case"primitive":if(!a(f,["[",":",","])){i(f,_+" can only follow '[' ':' ',' tokens");break}if(!k.isValue){i(f,"Unexpected "+_+" found at key position");break}"primitive"===_&&"undefined"===C&&i(f,"'undefined' token is not accepted. Use 'null' token instead"),u.json+=C}}if(!m){for(var A=Math.ceil(w.length/2),z=0,B=!1;w.length>0;){B=!1;for(var M=0;M<w.length-1;M++){var V=w[M].string+w[M+1].string;["[]","{}"].indexOf(V)>-1&&(n=M,w.splice(n+1,1),w.splice(n,1),B||(B=!0))}if(z++,!B)break;if(z>=A)break}if(w.length>0){var P=w[0].string,I=w[0].i,q="["===P?"]":"}";x=w[0].line,i(I,"'"+P+"' token is missing closing '"+q+"' token")}}if(!m&&-1===[void 0,""].indexOf(u.json))try{u.jsObject=JSON.parse(u.json)}catch(e){var L=e.message,F=L.indexOf("position");if(-1===F)throw new Error("Error parsing failed");for(var K=L.substring(F+9,L.length),R=parseInt(K),N=0,W=0,H=!1,U=1,G=!1;N<R&&!G&&("linebreak"===(H=u.tokens_merge[W]).type&&U++,-1===["space","linebreak"].indexOf(H.type)&&(N+=H.string.length),!(N>=R));)W++,u.tokens_merge[W+1]||(G=!0);x=U,i(W,"Unexpected token '"+H.string+"' found")}this.colors;var J=1,X=0;if(!m)for(f=0;f<u.tokens_merge.length;f++){var Y=u.tokens_merge[f],Q=Y.string;switch(Y.type){case"space":case"linebreak":break;case"string":case"number":case"primitive":case"error":u.markup+=(a(f,[",","["])?c():"")+t(f,Y,X);break;case"key":u.markup+=c()+t(f,Y,X);break;case"colon":u.markup+=t(f,Y,X)+"&nbsp;";break;case"symbol":switch(Q){case"[":case"{":u.markup+=(a(f,[":"])?"":c())+t(f,Y,X),X++;break;case"]":case"}":X--;var Z=f===u.tokens_merge.length-1,$=f>0?["[","{"].indexOf(u.tokens_merge[f-1].string)>-1?"":c(Z):"";u.markup+=$+t(f,Y,X);break;case",":u.markup+=t(f,Y,X)}}}if(m){var ee=function(e){for(var n=0,t=0;t<e.length;t++)["\n","\r"].indexOf(e[t])>-1&&n++;return n},ne=1;J=1;for(f=0;f<u.tokens_merge.length;f++){var te=u.tokens_merge[f],re=te.type,oe=te.string;"linebreak"===re&&J++,u.markup+=t(f,te,X),ne+=ee(oe)}++J<++ne&&(J=ne)}return u.tokens_merge.forEach(function(e){u.indented+=e.string}),{tokens:u.tokens_merge,noSpaces:u.tokens_plainText,indented:u.indented,json:u.json,jsObject:u.jsObject,markup:u.markup,lines:J,error:m}}if(!("nodeType"in e)){var ie=function(e,n){return e.slice(0,n)+e.slice(n+1)},se=function(){if(-1==="'\"".indexOf(ke.currentChar))return!1;if(!ke.stringOpen)return le(),ke.stringStart=ke.position,ke.stringOpen=ke.currentChar,!0;if(ke.stringOpen===ke.currentChar){le();var e=ke.inputText.substring(ke.stringStart,ke.position+1);return ce(e),ke.stringOpen=!1,!0}return!1},ae=function(){if(-1===":,{}[]".indexOf(ke.currentChar))return!1;if(ke.stringOpen)return!1;switch(le(),ce(ke.currentChar),ke.currentChar){case":":return ke.isValue=!0,!0;case"{":case"[":ke.brackets.push(ke.currentChar);break;case"}":case"]":ke.brackets.pop()}return":"!==ke.currentChar&&(ke.isValue="["===ke.brackets[ke.brackets.length-1]),!0},le=function(){return 0!==ke.tokenSecondary.length&&(ke.tokens.push(ke.tokenSecondary),ke.tokenSecondary="",!0)},ce=function(e){return 0!==e.length&&(ke.tokens.push(e),!0)},pe=function(e){for(var n=[],t=0;t<2*e;t++)n.push(" ");return(e>0?"\n":"")+n.join("")},ue=function(e){var n=[];e>0&&ve++;for(var t=0;t<2*e;t++)n.push("&nbsp;");return(e>0?"<br>":"")+n.join("")},ke={inputText:JSON.stringify(e),position:0,currentChar:"",tokenPrimary:"",tokenSecondary:"",brackets:[],isValue:!1,stringOpen:!1,stringStart:0,tokens:[]};for(f=0;f<ke.inputText.length;f++){ke.position=f,ke.currentChar=ke.inputText.charAt(ke.position);var fe=ae(),de=se(),be="\\"===ke.currentChar&&(ke.inputText=ie(ke.inputText,ke.position),!0);fe||de||be||ke.stringOpen||(ke.tokenSecondary+=ke.currentChar)}var he={brackets:[],isValue:!1,tokens:[]};he.tokens=ke.tokens.map(function(e){var n="",t="",r="";switch(e){case",":n="symbol",t=e,r=e,he.isValue="["===he.brackets[he.brackets.length-1];break;case":":n="symbol",t=e,r=e,he.isValue=!0;break;case"{":case"[":n="symbol",t=e,r=e,he.brackets.push(e),he.isValue="["===he.brackets[he.brackets.length-1];break;case"}":case"]":n="symbol",t=e,r=e,he.brackets.pop(),he.isValue="["===he.brackets[he.brackets.length-1];break;case"undefined":n="primitive",t=e,r=void 0;break;case"null":n="primitive",t=e,r=null;break;case"false":n="primitive",t=e,r=!1;break;case"true":n="primitive",t=e,r=!0;break;default:var o=e.charAt(0);if("'\"".indexOf(o)>-1){n=he.isValue?"string":"key",t=e.slice(1,-1),"key"===n&&t.indexOf(" ")>-1&&(t="'"+t+"'"),"string"===n&&(t=t.indexOf("'")>-1?'"'+t+'"':"'"+t+"'"),r=t;break}if("0123456789".indexOf(o)>-1){n="number",t=e,r=Number(e);break}if(e.length>0&&!he.isValue){n="key",(t=e).indexOf(" ")>-1&&(t="'"+t+"'"),r=t;break}}return{type:n,string:t,value:r,depth:he.brackets.length}});var ge="";he.tokens.forEach(function(e){ge+=e.string});var ye="";he.tokens.forEach(function(e,n){switch(e.string){case"[":case"{":var t=n<he.tokens.length-1-1?he.tokens[n+1]:"";-1==="}]".indexOf(t.string)?ye+=e.string+pe(e.depth):ye+=e.string;break;case"]":case"}":var r=n>0?he.tokens[n-1]:"";-1==="[{".indexOf(r.string)?ye+=pe(e.depth)+e.string:ye+=e.string;break;case":":ye+=e.string+" ";break;case",":ye+=e.string+pe(e.depth);break;default:ye+=e.string}});this.colors;var ve=1,me="",xe=he.tokens.length-1;return he.tokens.forEach(function(e,n){var r=t(n,e,e.depth);switch(e.string){case"{":case"[":var o=n<he.tokens.length-1-1?he.tokens[n+1]:"";-1==="}]".indexOf(o.string)?me+=r+ue(e.depth):me+=r;break;case"}":case"]":var i=n>0?he.tokens[n-1]:"";-1==="[{".indexOf(i.string)?me+=ue(e.depth)+(xe===n?"<br>":"")+r:me+=r;break;case":":me+=r+" ";break;case",":me+=r+ue(e.depth);break;default:me+=r}}),ve+=2,{tokens:he.tokens,noSpaces:ge,indented:ye,json:JSON.stringify(e),jsObject:e,markup:me,lines:ve}}}}]),n}();e.exports=c},function(n,t){n.exports=e}])});